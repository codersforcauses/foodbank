{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Animation_1 = require(\"../Animation\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Sprite = function (_super) {\n  __extends(Sprite, _super);\n\n  function Sprite(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this._updated = true;\n    _this.anim = new Animation_1.Animation(function () {\n      var updated = _this._updated;\n      _this._updated = false;\n      return updated;\n    });\n\n    _this.on('animationChange.konva', function () {\n      this.frameIndex(0);\n    });\n\n    _this.on('frameIndexChange.konva', function () {\n      this._updated = true;\n    });\n\n    _this.on('frameRateChange.konva', function () {\n      if (!this.anim.isRunning()) {\n        return;\n      }\n\n      clearInterval(this.interval);\n\n      this._setInterval();\n    });\n\n    return _this;\n  }\n\n  Sprite.prototype._sceneFunc = function (context) {\n    var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        x = set[ix4 + 0],\n        y = set[ix4 + 1],\n        width = set[ix4 + 2],\n        height = set[ix4 + 3],\n        image = this.image();\n\n    if (this.hasFill() || this.hasStroke()) {\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n\n    if (image) {\n      if (offsets) {\n        var offset = offsets[anim],\n            ix2 = index * 2;\n        context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n      } else {\n        context.drawImage(image, x, y, width, height, 0, 0, width, height);\n      }\n    }\n  };\n\n  Sprite.prototype._hitFunc = function (context) {\n    var anim = this.animation(),\n        index = this.frameIndex(),\n        ix4 = index * 4,\n        set = this.animations()[anim],\n        offsets = this.frameOffsets(),\n        width = set[ix4 + 2],\n        height = set[ix4 + 3];\n    context.beginPath();\n\n    if (offsets) {\n      var offset = offsets[anim];\n      var ix2 = index * 2;\n      context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n    } else {\n      context.rect(0, 0, width, height);\n    }\n\n    context.closePath();\n    context.fillShape(this);\n  };\n\n  Sprite.prototype._useBufferCanvas = function () {\n    return _super.prototype._useBufferCanvas.call(this, true);\n  };\n\n  Sprite.prototype._setInterval = function () {\n    var that = this;\n    this.interval = setInterval(function () {\n      that._updateIndex();\n    }, 1000 / this.frameRate());\n  };\n\n  Sprite.prototype.start = function () {\n    if (this.isRunning()) {\n      return;\n    }\n\n    var layer = this.getLayer();\n    this.anim.setLayers(layer);\n\n    this._setInterval();\n\n    this.anim.start();\n  };\n\n  Sprite.prototype.stop = function () {\n    this.anim.stop();\n    clearInterval(this.interval);\n  };\n\n  Sprite.prototype.isRunning = function () {\n    return this.anim.isRunning();\n  };\n\n  Sprite.prototype._updateIndex = function () {\n    var index = this.frameIndex(),\n        animation = this.animation(),\n        animations = this.animations(),\n        anim = animations[animation],\n        len = anim.length / 4;\n\n    if (index < len - 1) {\n      this.frameIndex(index + 1);\n    } else {\n      this.frameIndex(0);\n    }\n  };\n\n  return Sprite;\n}(Shape_1.Shape);\n\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\n\nGlobal_1._registerNode(Sprite);\n\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, Validators_1.getNumberValidator());\nFactory_1.Factory.backCompat(Sprite, {\n  index: 'frameIndex',\n  getIndex: 'getFrameIndex',\n  setIndex: 'setFrameIndex'\n});\nUtil_1.Collection.mapMethods(Sprite);","map":{"version":3,"sources":["/home/jun/foodbank/node_modules/konva/lib/shapes/Sprite.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","Util_1","require","Factory_1","Shape_1","Animation_1","Validators_1","Global_1","Sprite","_super","config","_this","call","_updated","anim","Animation","updated","on","frameIndex","isRunning","clearInterval","interval","_setInterval","_sceneFunc","context","animation","index","ix4","set","animations","offsets","frameOffsets","x","y","width","height","image","hasFill","hasStroke","beginPath","rect","closePath","fillStrokeShape","offset","ix2","drawImage","_hitFunc","fillShape","_useBufferCanvas","that","setInterval","_updateIndex","frameRate","start","layer","getLayer","setLayers","stop","len","length","Shape","className","_registerNode","Factory","addGetterSetter","getNumberValidator","backCompat","getIndex","setIndex","Collection","mapMethods"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Animation_1 = require(\"../Animation\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Sprite = (function (_super) {\n    __extends(Sprite, _super);\n    function Sprite(config) {\n        var _this = _super.call(this, config) || this;\n        _this._updated = true;\n        _this.anim = new Animation_1.Animation(function () {\n            var updated = _this._updated;\n            _this._updated = false;\n            return updated;\n        });\n        _this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        _this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        _this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n        return _this;\n    }\n    Sprite.prototype._sceneFunc = function (context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                var offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    };\n    Sprite.prototype._hitFunc = function (context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            var offset = offsets[anim];\n            var ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    };\n    Sprite.prototype._useBufferCanvas = function () {\n        return _super.prototype._useBufferCanvas.call(this, true);\n    };\n    Sprite.prototype._setInterval = function () {\n        var that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    };\n    Sprite.prototype.start = function () {\n        if (this.isRunning()) {\n            return;\n        }\n        var layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    };\n    Sprite.prototype.stop = function () {\n        this.anim.stop();\n        clearInterval(this.interval);\n    };\n    Sprite.prototype.isRunning = function () {\n        return this.anim.isRunning();\n    };\n    Sprite.prototype._updateIndex = function () {\n        var index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    };\n    return Sprite;\n}(Shape_1.Shape));\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\nGlobal_1._registerNode(Sprite);\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, Validators_1.getNumberValidator());\nFactory_1.Factory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex',\n});\nUtil_1.Collection.mapMethods(Sprite);\n"]},"metadata":{},"sourceType":"script"}